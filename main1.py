# ---------------------------------------------------------------
# Импорт необходимых библиотек
# ---------------------------------------------------------------
import numpy as np                   # Библиотека для работы с массивами и генерации случайных чисел
import pandas as pd                  # Удобная работа с данными в виде таблиц
import matplotlib.pyplot as plt      # Библиотека для построения графиков
import os                            # Для работы с файловой системой

# ---------------------------------------------------------------
# Параметры нормального распределения
# ---------------------------------------------------------------
mean = 0          # Среднее значение распределения
std_dev = 1       # Стандартное отклонение
num_samples = 1000  # Количество генерируемых случайных значений

# ---------------------------------------------------------------
# Генерация данных по нормальному распределению
# ---------------------------------------------------------------
data = np.random.normal(mean, std_dev, num_samples)
# Возвращает массив из 1000 случайных чисел, распределённых N(0,1)

# ---------------------------------------------------------------
# Создаём DataFrame для удобства анализа
# ---------------------------------------------------------------
df = pd.DataFrame({"value": data})
# Таблица с одним столбцом 'value'

# ---------------------------------------------------------------
# Создание гистограммы
# ---------------------------------------------------------------
plt.figure(figsize=(10, 6))  # Размер фигуры (ширина x высота)
plt.hist(df["value"], bins=30, edgecolor='black')
# bins=30 — количество столбцов гистограммы
# edgecolor='black' — делаем столбцы визуально чёткими

plt.title("Гистограмма случайных данных\nНормальное распределение (mean=0, std=1)")
plt.xlabel("Значение")
plt.ylabel("Частота")
plt.grid(True)

# ---------------------------------------------------------------
# Сохранение гистограммы локально
# ---------------------------------------------------------------
local_path = "histogram_generated.png"
# Сохранение в текущую папку, если запускаете из PyCharm/VSCode/Jupyter

plt.savefig(local_path, dpi=300)
# dpi=300 — четкое изображение
print(f"Гистограмма сохранена локально как: {local_path}")

# ---------------------------------------------------------------
# Сохранение гистограммы по указанному ВАМИ ПОЛНОМУ ПУТИ
# ---------------------------------------------------------------
save_path = r"C:\Users\Lenovo\Documents\GitHub\PandasDataseMatplotlibtAZ03csv\DatasetMatplotlibAZ03\histogram.png"

# Создаем папку при необходимости
os.makedirs(os.path.dirname(save_path), exist_ok=True)

# Сохраняем график по указанному пути
plt.savefig(save_path, dpi=300)
print(f"Гистограмма сохранена по вашему пути: {save_path}")

# ---------------------------------------------------------------
# Отображение гистограммы в консоли после RUN
# ---------------------------------------------------------------
plt.show()

# ---------------------------------------------------------------
# Вывод статистики данных в консоль
# ---------------------------------------------------------------
print("\nСтатистика сгенерированных данных:")
print(df["value"].describe())

# ---------------------------------------------------------------
# Дополнительно — сохраняем таблицу данных в CSV
# ---------------------------------------------------------------
csv_path = r"C:\Users\Lenovo\Documents\GitHub\PandasDatasetMatplotlibtAZ03csv\DatasetMatplotlibAZ03\generated_data.csv"
df.to_csv(csv_path, index=False)
print(f"CSV-файл с данными сохранён по пути: {csv_path}")
